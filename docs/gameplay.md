# Gameplay 

本项目在经典五子棋规则的基础上，引入了 **单位类型、技能机制与冷却系统**，
构建了一套偏向 **回合制策略博弈** 的对战模型。

该规则设计的目标并非追求复杂玩法本身，
而是为实时通信、状态同步与一致性控制提供一个
**足够复杂、可验证的业务场景**。

---

## 1. 基础规则

- 棋盘大小：**15 × 15**
- 对战双方：黑 / 白
- 对战模式：**回合制**
- 胜利条件：
  - 仅通过 **常规核心**形成五连珠获胜
  - 技能单位 **不能直接触发胜利**

---

## 2. 单位系统

游戏中的每一个落子，都是一个具备状态的 **单位**
而非单纯的棋盘标记。

### 单位类型一览

| 单位类型  | 显示名称 | 说明                         |
| --------- | -------- | ---------------------------- |
| `NORMAL`  | 常规核心 | 基础单位，用于连珠与胜负判定 |
| `ARCHER`  | 狙击模组 | 具备远程打击能力             |
| `CAVALRY` | 突袭模组 | 具备直线突进与位移能力       |
| `SHIELD`  | 偏导护盾 | 提供邻域防护的被动单位       |

---

## 3. 单位库存与消耗

- 每名玩家对 **技能单位** 拥有有限库存
- 落子即消耗库存
- 当库存为 0 时，无法继续部署对应单位

该机制用于限制技能滥用，并增加决策成本。

---

## 4. 技能与冷却机制

### 冷却系统（Cooldown）

- 技能单位在使用技能后进入冷却
- 冷却以 **回合** 为单位递减
- 回合切换时，当前玩家所有单位的冷却时间统一结算

---

## 5. 各单位技能说明

### 5.1 狙击模组（ARCHER）

- 技能类型：远程打击
- 有效距离：曼哈顿距离 ≤ 2
- 技能效果：
  - 若目标未被护盾保护 → 击杀
  - 若目标被护盾保护 → 攻击被拦截
- 使用后进入冷却

---

### 5.2 突袭模组（CAVALRY）

- 技能类型：直线突进
- 使用限制：
  - 仅允许横向或纵向直线
  - 路径中不可存在其他单位
- 技能效果：
  - 目标为空 → 位移
  - 目标为敌方单位：
    - 击杀成功 → 位移到目标位置
    - 被护盾拦截 → 停留原位
- 使用后进入冷却

---

### 5.3 偏导护盾（SHIELD）

- 技能类型：被动防护
- 生效规则：
  - 若目标单位 **8 邻域内存在己方护盾**
  - 则所有技能攻击将被拦截
- 护盾在触发防护时进入冷却
- 护盾本身 **不具备主动攻击能力**

---

## 6. 胜负判定约束

为避免技能系统破坏核心博弈逻辑：

- 仅 `NORMAL` 单位参与五连珠判定
- 技能单位无法直接触发胜利
- 技能更多用于 **局部干扰与战术控制**

该设计确保：
- 核心胜负逻辑稳定
- 技能系统为辅助手段

---

## 7. 回合结算流程

每一次回合切换均触发完整结算流程：

1. 当前玩家单位冷却时间递减
2. 操作权切换至对手
3. 回合数递增

该流程在服务端原子执行，
并作为状态同步与一致性验证的关键节点。

---

## 8. 设计动机说明

引入单位与技能系统的目的在于：

- 制造 **非局部状态影响**
- 引入 **冷却与时序约束**
- 提高对局状态复杂度
- 验证后端在复杂规则下的状态一致性与并发安全

该规则体系为服务端架构与实时通信模型提供了
一个具有工程意义的验证载体。